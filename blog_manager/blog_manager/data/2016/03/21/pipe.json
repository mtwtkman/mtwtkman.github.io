{"title": "shell\u306e\u30d1\u30a4\u30d7\u3092python\u3067\u5b9f\u88c5", "body": "\u306a\u3093\u304b\u3075\u3068\u3067\u304d\u308b\u304b\u306a\u3068\u601d\u3063\u3066\u8a66\u3057\u3066\u307f\u305f\u3068\u3053\u308d\u4ee5\u4e0b\u306e\u3088\u3046\u306a\u611f\u3058\u306b\u306a\u308a\u307e\u3057\u305f\u3002\n\n```python\nclass Pipable:\n    def __init__(self, cmd):\n        if callable(cmd):\n            self.cmd = cmd\n        else:\n            raise ValueError\n\n    def __ror__(self, other):\n        return self.cmd(other)\n\n    def __call__(self, *args):\n        return self.cmd(*args)\n\n\ndef cat(f):\n    with open(f) as fp:\n        data = fp.read()\n    return data\n\n\np1 = Pipable(cat)\np2 = Pipable(lambda x: x.upper())\np3 = Pipable(lambda x: '-'.join(x))\n\n\nassert p1('hoge.txt') == 'neko\\n'\nassert p1('hoge.txt') | p2 == 'NEKO\\n'\nassert p1('hoge.txt') | p2 | p3 == 'N-E-K-O-\\n'\n```\n\n\u8981\u306f`p3(p2(p1('hoge.txt')))`\u3068\u3044\u3046\u72b6\u614b\u306b\u3057\u3066\u3084\u308c\u3070\u3044\u3044\u306e\u3067(\u95a2\u6570\u5408\u6210\u3068\u3044\u3046\u3084\u3064\uff1f)`__ror__`\u3067\u5de6\u5074\u306e\u51e6\u7406\u306e\u7d50\u679c\u3092\u53d7\u3051\u53d6\u308b\u3088\u3046\u306b\u3057\u307e\u3057\u305f\u3002\n\n\u5b9f\u7528\u6027\u7686\u7121\u30de\u30f3\u3067\u3059\u3002", "publish": true, "tags": ["python"], "date": "2016/03/21 21:34:50", "slug": "pipe"}